<div class="page">

  <div class="form container">
    <h1>Editing a show</h1>

    <form [formGroup]="form" (ngSubmit)="onSubmit()">

      <div>
        <label for="cinema"> <span class="mandatory">*</span> Select Cinema</label> <br>
        <select class="inp-dropdown" formControlName="cinemaname" (change)="onChange(form.value.cinemaname)">
          <option default disabled value="">Not Selected</option>
          <option *ngFor="let cinema of cinemas" value="{{cinema.name}}">{{cinema.name}}</option>
        </select>
      </div>
      <span *ngIf="form.controls['cinemaname'].touched && form.controls['cinemaname'].invalid" class="warning">cinema name is not valid</span>

      <br><br>
            
      <div>
        <label for="movie"> <span class="mandatory">*</span> Select Movie</label> <br>
        <select class="inp-dropdown"  formControlName="moviename">
          <option default disabled value="">Not Selected</option>
          <option *ngFor="let movie of movies" value="{{movie.name}}">{{movie.name}}</option>
        </select>
      </div>
      <span *ngIf="form.controls['moviename'].touched && form.controls['moviename'].invalid" class="warning">movie name is not valid</span>

      <br><br>
            
      <div>
        <label for="screen"> <span class="mandatory">*</span> Select screen</label> <br>
        <select class="inp-dropdown" formControlName="screen">
          <option default disabled value="">Not Selected</option>
          <option *ngFor="let n of screensInSelectedCinema; index as i" value="screen {{i+1}}">screen {{i+1}}</option>
        </select>
      </div>
      <span *ngIf="form.controls['screen'].touched && form.controls['screen'].invalid" class="warning">screen number is is not valid</span>

      <br><br>      

      <div>
        <label> <span class="mandatory">*</span> Start Screening Date</label> <br>
        <input class="inp-field" type="date" formControlName="startscreeningdate">
      </div>
      <span *ngIf="form.controls['startscreeningdate'].touched && form.controls['startscreeningdate'].invalid" class="warning">start screening date is not valid</span>

      <br><br>
      
      <div>
        <label> <span class="mandatory">*</span> End Screening Date</label> <br>
        <input class="inp-field" type="date" formControlName="endscreeningdate">
      </div>
      <span *ngIf="form.controls['endscreeningdate'].touched && form.controls['endscreeningdate'].invalid" class="warning">end screening date is not valid</span>

      <br><br>    
            
      <div>
        <label for="screeningtime"> <span class="mandatory">*</span> Screening time</label> <br>
        <select multiple class="inp-multiple-times" formControlName="screeningtime">
          <option default disabled value="">Not Selected</option>
          <option *ngFor="let time of showsavailabilitytimeInSelectedCinema" value="{{time}}">{{time}}</option>
        </select>
      </div>
      <span *ngIf="form.controls['screeningtime'].touched && form.controls['screeningtime'].invalid" class="warning">screening time is not valid</span>
      
      <br><br>

      <div>
        <a class="link" routerLink="/shows"> <button mat-stroked-button color="warn" type="button">cancel</button> </a>
        <button mat-raised-button color="primary" type="submit" [disabled]="form.invalid">Submit</button>
      </div>

    </form>
  </div>

</div>






